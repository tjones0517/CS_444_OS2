--- /scratch/fall2017/31/linux-yocto-3.19/block/sstf-iosched.c	2017-10-26 22:16:57.939189985 -0700
+++ sstf-iosched.c	2017-10-26 22:28:27.346353408 -0700
@@ -37,14 +37,26 @@
 	struct sstf_data *nd = q->elevator->elevator_data;
 
 	struct list_head *iterator = NULL; //set up an iterator
+	struct list_head *printer = NULL;
 
+	if(!list_empty(&nd->queue)){
 	list_for_each(iterator, &nd->queue){
 		struct request *temp = list_entry(iterator, struct request, queuelist);
-		if(rq_end_sector(rq)>rq_end_sector(temp))//We want the list to be ordered
-		   list_add(&rq->queuelist, &temp->queuelist);//add the element in the location immediately after the first value it is larger than
+		if(blk_rq_pos(rq)<blk_rq_pos(temp)){//We want the list to be ordered
+		   list_add(&rq->queuelist, &temp->queuelist.prev);//add the element in the location immediately after the first value it is larger than
+		   break;
+		}
 	}
-
+	}
+	else{
 	list_add_tail(&rq->queuelist, &nd->queue);
+	}
+
+	printk("REQUEST QUEUE: ");
+	list_for_each(printer,&nd->queue){
+	   struct request *printed=list_entry(printer, struct request, queuelist);
+	   printk(" %llu", blk_rq_pos(printed));
+	}
 }
 
 static struct request *
--- /scratch/fall2017/31/linux-yocto-3.19/block/Makefile	2017-10-03 11:35:57.597246975 -0700
+++ Makefile	2017-10-26 22:24:21.152213106 -0700
@@ -19,6 +19,7 @@
 obj-$(CONFIG_IOSCHED_DEADLINE)	+= deadline-iosched.o
 obj-$(CONFIG_IOSCHED_CFQ)	+= cfq-iosched.o
 
+obj-$(CONFIG_IOSCHED_SSTF)	+= sstf-iosched.o
 obj-$(CONFIG_BLOCK_COMPAT)	+= compat_ioctl.o
 obj-$(CONFIG_BLK_CMDLINE_PARSER)	+= cmdline-parser.o
 obj-$(CONFIG_BLK_DEV_INTEGRITY) += bio-integrity.o blk-integrity.o t10-pi.o
--- /scratch/fall2017/31/linux-yocto-3.19/block/Kconfig.iosched	2017-10-03 11:35:57.597246975 -0700
+++ Kconfig.iosched	2017-10-26 22:24:17.560152372 -0700
@@ -2,6 +2,12 @@
 
 menu "IO Schedulers"
 
+config IOSCHED_SSTF
+	tristate "SSTF SCHEDULER"
+	default y
+	---help---
+		SSTF Scheduler
+
 config IOSCHED_NOOP
 	bool
 	default y
@@ -55,6 +61,8 @@
 	config DEFAULT_NOOP
 		bool "No-op"
 
+	config DEFAULT_SSTF
+		bool "SSTF" if IOSCHED_SSTF=y
 endchoice
 
 config DEFAULT_IOSCHED
@@ -62,6 +70,7 @@
 	default "deadline" if DEFAULT_DEADLINE
 	default "cfq" if DEFAULT_CFQ
 	default "noop" if DEFAULT_NOOP
+	default "sstf" if DEFAULT_SSTF
 
 endmenu
 
